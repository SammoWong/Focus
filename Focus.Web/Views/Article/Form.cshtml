
@{
    ViewData["Title"] = "内容编辑";
}
<div class="wrapper wrapper-content  animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox">
                <div class="ibox-content">
                    <form class="form-horizontal">
                        <div class="form-group hidden">
                            <label class="col-sm-1 control-label">Id：</label>
                            <div class="col-sm-10">
                                <input id="id" type="text" class="form-control" name="id" aria-required="true">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-1 control-label">分类：</label>
                            <div class="col-sm-10">
                                <select class="form-control" name="category" id="category">
                                    <option value=1>网站公告</option>
                                    <option value=2>新闻中心</option>
                                    <option value=3>培训资料</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-1 control-label">标题：</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" value="" id="title" name="title">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-1 control-label">有效：</label>
                            <div class="col-sm-10">
                                <select class="form-control" name="enabled" id="enabled">
                                    <option value='true'>是</option>
                                    <option value='false'>否</option>
                                </select>
                            </div>
                        </div>
                        <div class="summernote">
                            <h2>H+ 后台主题</h2>
                            <p>H+是一个完全响应式，基于Bootstrap3最新版本开发的扁平化主题，她采用了主流的左右两栏式布局，使用了Html5+CSS3等现代技术，她提供了诸多的强大的可以重新组合的UI组件，并集成了最新的jQuery版本，当然，也集成了很多功能强大，用途广泛的国内外jQuery插件及其他组件，她可以用于所有的Web应用程序，如<b>网站管理后台</b>，<b>网站会员中心</b>，<b>CMS</b>，<b>CRM</b>，<b>OA</b>等等，当然，您也可以对她进行深度定制，以做出更强系统。</p>
                            <p>
                                <b>当前版本：</b>v4.1.0
                            </p>
                            <p>
                                <b>定价：</b><span class="label label-warning">&yen;000（不开发票）</span>
                            </p>
                        </div>
                        <hr />
                        <div class="pull-right">
                            <label>
                                <input type="checkbox" class="i-checks" id="isTop">是否置顶
                            </label>
                            <a class="btn btn-danger btn-sm"><i class="fa fa-times"></i> 放弃</a>
                            <a class="btn btn-primary btn-sm" id="btnSubmit"><i class="fa fa-pencil"></i> 保存</a>
                        </div>
                        <div class="clearfix"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script>
        var viewModel = function () {
            return {
                init: function () {
                    this.initPage();
                    this.bindEvents();
                },
                methods: {
                    
                },
                initPage: function () {
                    var note = $(".summernote").summernote({
                        lang: "zh-CN"
                    });
                },
                bindEvents: function () {
                    $('#btnSubmit').click(function () {
                        _.post(apiUrl + '/api/Article/AddOrUpdate',
                            {
                                id: $('#id').val(),
                                category: $('#category').val(),
                                title: $('#title').val(),
                                enabled: $('#enabled').val(),
                                content: $(".summernote").summernote().code(),
                                isTop: $('#isTop').is(':checked')
                            }, function (data) {
                                if (data.code == 0) {
                                    toastr.success(data.message);
                                    window.history.go(-1);
                                } else {
                                    toastr.error(data.message);
                                }
                            });
                    });
                }
            }
        }();
        window.onload = function () {
            viewModel.init();
        }
    </script>
}

